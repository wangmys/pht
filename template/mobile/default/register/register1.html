{template '_header'}
<style>
	.logo{
		margin:0rem auto;
	}
</style>

<div class='fui-page  fui-page-current' style='margin-top:5px;' id="fui-page-1554085741875">
	<div class="logo">
		<img src="http://img2.y01.cn/images/4/2019/03/al2j64UBjj17270zFJpuy49U2y1P0j.jpg" alt="" style="width: 20rem;">
	</div>
	<div class="fui-cell-group flag" attr-x="0">
		<div class="fui-cell must">
			<div class="fui-cell-label">手机号</div>
			<div class="fui-cell-info"><input type="tel" class='fui-input' id='phone' name='phone' placeholder="请输入您的手机号" maxlength="11" /></div>
		</div>
		<div class="fui-cell must">
			<div class="fui-cell-label">验证码</div>
			<div class="fui-cell-info"><input type="tel" class='fui-input' id='verifycode' name='verifycode' placeholder="5位验证码"  value="" maxlength="5" /></div>
			<div class="fui-cell-remark noremark"><a class="btn btn-default btn-default-o btn-sm" id="btnCode">获取验证码</a></div>
		</div>
	</div>
	<div class="fui-cell-group"  style="display: none" attr-x="1">
		<div class="fui-cell must">
			<div class="fui-cell-label ">姓名</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='username' name='username' placeholder="请输入您的姓名" /></div>
		</div>
		<div class="fui-cell must ">
			<div class="fui-cell-label">性别</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='sex' name='sex' placeholder="请选择您的性别" /></div>
		</div>
		<div class="fui-cell must ">
			<div class="fui-cell-label ">出生日期</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='birthtime' name='birthtime' placeholder="请选择您的出生日期" /></div>
		</div>
		<div class="fui-cell must ">
			<div class="fui-cell-label ">年龄</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='age' name='age' placeholder="请输入您的年龄" /></div>
		</div>
		<div class="fui-cell must ">
			<div class="fui-cell-label ">地址</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='city' name='city' placeholder="请选择您的地址" /></div>
		</div>
		<div class="fui-cell must ">
			<div class="fui-cell-label ">详细地址</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='addr' name='addr' placeholder="请输入您的详细地址" /></div>
		</div>
	</div>
	<div class="fui-cell-group" style="display: none" attr-x="2">
		<div class="fui-cell must ">
			<div class="fui-cell-label ">商品</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='goodname' name='goodname' placeholder="请输入您购买的商品" /></div>
		</div>
		<div class="fui-cell must">
			<div class="fui-cell-label">日期</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='buytime' name='buytime' placeholder="请输入您购买的日期" /></div>
		</div>
		<div class="fui-cell must">
			<div class="fui-cell-label ">门店</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='buystore' name='buystore' placeholder="请输入您购买的门店" /></div>
		</div>
		<div class="fui-cell must">
			<div class="fui-cell-label ">销售员</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='sales' name='sales' placeholder="请输入销售人员的名字" /></div>
		</div>
		<div class="fui-cell must">
			<div class="fui-cell-label ">病史</div>
			<div class="fui-cell-info"><input type="text" class='fui-input' id='medical' name='medical' placeholder="请输入您的病史(选填)" /></div>
		</div>
	</div>
	<a href='#' id='btn-submit' class='btn btn-primary block' style="position: fixed;bottom: 0.5%;left:1%;display: block;width: 98%;margin: 0rem auto">
	下一步
	</a>
</div>
<script type="text/javascript">
	function Data(phone,username,birthtime,age,city,goodname,buytime,buystore,sales,medical){
		this.phone = phone;//手机号码
		this.username = username;//姓名
		this.birthtime = birthtime;//出生日期
		this.age = age;//年龄
		this.city = city;//城市
		this.goodname = goodname;//商品名称
		this.buytime = buytime;//购买商品时间
		this.buystore = buystore;//购买门店
		this.sales = sales;//销售员
		this.medical = medical;//病史
	}
	var phone,username,birthtime,age,city,goodname,buytime,buystore,sales,medical;
	var data = new Data();
	var regPhone = /^1(3|4|5|7|8)\d{9}$/;
	$('#btn-submit').click(function(){
		var x = $('.flag').attr('attr-x');
		if(x==0){
			var phone = $('#phone').val();
			if(phone=='' || !(regPhone.test(phone))){
				FoxUI.toast.show('手机号为空或手机号错误');
				return false;
			}
			data.phone = phone;

			$('.fui-cell-group').eq(0).hide().removeClass('flag');
			$('.fui-cell-group').eq(1).show().addClass('flag');
		}else if(x==1){
			username = $('#username').val();
			sex = $('#sex').val();
			birthtime = $('#birthtime').val();
			age = $('#age').val();
			city = $('#city').val();
			addr = $('#addr').val();
			switch(true){
				case username=='':
					FoxUI.toast.show('姓名不能为空');return false;
				break;
				case sex=='':
					FoxUI.toast.show('性别不能为空');return false;
				break;
				case birthtime=='':
					FoxUI.toast.show('出生日期不能为空');return false;
				break;
				case age=='':
					FoxUI.toast.show('年龄不能为空');return false;
				break;
				case city=='':
					FoxUI.toast.show('地址不能为空');return false;
				break;
				case addr=='':
					FoxUI.toast.show('详细地址不能为空');return false;
				break;
			}
			data.username = username;
			data.sex = sex;
			data.birthtime = birthtime;
			data.age = age;
			data.city = city;
			data.addr = addr;
			$('.fui-cell-group').eq(1).hide().removeClass('flag');
			$('.fui-cell-group').eq(2).show().addClass('flag');
			$(this).text('注册')
		}if(x==2){
			goodname = $('#goodname').val();
			buytime = $('#buytime').val();
			buystore = $('#buystore').val();
			sales = $('#sales').val();
			medical = $('#medical').val();
			switch(true){
				case goodname=='':
					FoxUI.toast.show('商品名称不能为空');return false;
				break;
				case buytime=='':
					FoxUI.toast.show('购买日期不能为空');return false;
				break;
				case buystore=='':
					FoxUI.toast.show('购买门店不能为空');return false;
				break;
				case sales=='':
					FoxUI.toast.show('销售人员不能为空');return false;
				break;
			}
			data.goodname = goodname;
			data.buytime = buytime;
			data.buystore = buystore;
			data.sales = sales;
			data.medical = medical;
			return console.log(data);
			$.post("{php echo mobileUrl('info/register/reg')}",{"data":data},function(res){
				console.log(res)
				if(res.status=='1'){
					FoxUI.toast.show(res.result.message,location.href=res.result.url);
					return false;
				}
				FoxUI.toast.show(res.result.message);
			},'json')
		}
	})
</script>
<script language='javascript'>
require(['biz/member/register'], function (modal) {
  	modal.initBind({
		endtime: {php echo intval($endtime)},
		backurl: "{$_GPC['backurl']}"
	});
});
</script>
{template '_footer'}